# O-Hunter: Web Vulnerability Scanner - Railway Deployment Guide

```
  ____ _   _ _   _ ____   _____
 / ___| | | | \ | |  _ \ / ____|
| |   | | | |  \| | |_) | (___   ___ _ __ __ _ _ __ ___   ___
| |   | | | | . ` |  _ < \___ \ / __| '__/ _` | '_ ` _ \ / _ \
| |___| |_| | |\  | |_) |____) | (__| | | (_| | | | | | |  __/
 \_____\___/|_| \_|____/|_____/ \___|_|  \__,_|_| |_| |_|\___|

Developed by Eng. Omar Hany
Optimized for Railway Deployment
```

## نظرة عامة

O-Hunter هو ماسح ضوئي شامل لثغرات الويب يقوم بفحص تلقائي لمخاطر OWASP Top 10، وينتج نتائج مرتبة حسب الأولوية، ويتضمن إثباتات استغلال آمنة، ويوفر خطوات إصلاح واضحة. تم تحسين هذا الإصدار للعمل بسلاسة على منصة Railway.

## المميزات الرئيسية

- **تغطية كاملة لـ OWASP Top 10**: تغطية شاملة لجميع فئات OWASP Top 10 (2021)
- **فحص متعدد الأنماط**: وحدات فحص سلبية ونشطة غير تدخلية ووحدات استغلال متقدمة اختيارية
- **بنية معيارية**: سهولة إضافة اختبارات ومكونات إضافية جديدة
- **تقارير متعددة الأشكال**: تقارير JSON وHTML ولوحة تحكم ويب تفاعلية
- **الأمان أولاً**: وضع آمن مدمج مع سير عمل موافقة للفحص النشط
- **واجهة مستخدم احترافية**: لوحة تحكم حديثة مبنية على React مع فحص في الوقت الفعلي
- **نشر سهل على Railway**: تكوين محسن للنشر المباشر على Railway

## التغييرات المحسنة لـ Railway

تم إجراء التحسينات التالية لضمان التشغيل السلس على منصة Railway:

### 1. ملفات التكوين الجديدة

#### `railway.toml`
ملف تكوين Railway الرئيسي الذي يحدد:
- استخدام Dockerfile للبناء
- مسار فحص الصحة `/api/health`
- سياسات إعادة التشغيل
- متغيرات البيئة الافتراضية

#### `.railwayignore`
ملف لتجاهل الملفات غير الضرورية أثناء النشر، مما يقلل من حجم النشر ويحسن الأداء.

### 2. تحسينات Dockerfile

- إزالة إنشاء مستخدم غير الجذر (غير مطلوب في Railway)
- تحسين متغيرات البيئة
- تحسين عملية بناء Frontend
- تحسين إعدادات البورت

### 3. تحسينات Flask Application

- تحسين مسارات الملفات الثابتة
- إضافة معالجة أخطاء محسنة
- تحسين endpoint الصحة
- دعم React Router
- تحسين رسائل الخطأ والتشخيص

### 4. سكريبت التشغيل

إضافة `start.sh` كسكريبت تشغيل احتياطي مع تعيين متغيرات البيئة المناسبة.

## النشر على Railway

### الطريقة الأولى: النشر المباشر من GitHub

1. **رفع المشروع إلى GitHub**:
   ```bash
   git init
   git add .
   git commit -m "Initial commit - Railway optimized"
   git branch -M main
   git remote add origin https://github.com/yourusername/O-Hunter.git
   git push -u origin main
   ```

2. **ربط Repository بـ Railway**:
   - اذهب إلى [Railway.app](https://railway.app)
   - سجل دخول أو أنشئ حساب جديد
   - اضغط على "New Project"
   - اختر "Deploy from GitHub repo"
   - اختر repository الخاص بك

3. **التكوين التلقائي**:
   - Railway سيكتشف `railway.toml` تلقائياً
   - سيبدأ عملية البناء باستخدام Dockerfile
   - سيتم تعيين متغيرات البيئة تلقائياً

4. **الوصول للتطبيق**:
   - بعد اكتمال النشر، ستحصل على رابط عام
   - يمكنك الوصول للواجهة الرئيسية مباشرة
   - API متاح على `/api/health` للفحص

### الطريقة الثانية: النشر باستخدام Railway CLI

1. **تثبيت Railway CLI**:
   ```bash
   npm install -g @railway/cli
   ```

2. **تسجيل الدخول**:
   ```bash
   railway login
   ```

3. **إنشاء مشروع جديد**:
   ```bash
   railway init
   ```

4. **النشر**:
   ```bash
   railway up
   ```

## التحقق من النشر

بعد النشر الناجح، يمكنك التحقق من عمل التطبيق:

### 1. فحص الصحة
```bash
curl https://your-app-name.railway.app/api/health
```

يجب أن تحصل على استجابة مثل:
```json
{
  "status": "healthy",
  "message": "O-Hunter API is running",
  "version": "1.0.0",
  "frontend_available": true
}
```

### 2. الواجهة الرئيسية
افتح المتصفح واذهب إلى `https://your-app-name.railway.app`

### 3. اختبار API
```bash
curl -X POST https://your-app-name.railway.app/api/scan \
  -H "Content-Type: application/json" \
  -d '{"target_url": "https://httpbin.org"}'
```

## الاستخدام

### واجهة الويب

1. افتح المتصفح واذهب إلى رابط التطبيق على Railway
2. أدخل رابط الهدف في حقل الفحص
3. اضغط على "Start Scan" لبدء تقييم الثغرات
4. راجع النتائج وحمل التقارير

### واجهة سطر الأوامر (CLI)

```bash
# فحص سلبي أساسي
python cli.py --target https://example.com --mode passive

# فحص نشط مع تقرير JSON
python cli.py --target https://example.com --mode active --output report.json

# فحص كامل مع تقرير HTML
python cli.py --target https://example.com --mode full --output report.html --format html

# استغلال متقدم (يتطلب تأكيد)
python cli.py --target https://example.com --mode full --exploit
```

### خيارات CLI

- `--target, -t`: رابط الهدف للفحص (مطلوب)
- `--mode, -m`: نمط الفحص (passive, active, full) - افتراضي: passive
- `--output, -o`: مسار ملف الإخراج
- `--format, -f`: شكل الإخراج (json, html) - افتراضي: json
- `--plugin, -p`: مكونات إضافية محددة للتشغيل (مفصولة بفواصل)
- `--exploit`: تفعيل الاستغلال المتقدم (يتطلب تأكيد)

## البنية المعمارية

### المكونات الأساسية

1. **المحرك الأساسي** (`core/`): تنسيق الماسح الضوئي، الجدولة، محمل المكونات الإضافية
2. **الوحدات** (`modules/`): ماسحات ضوئية فردية لكل فئة OWASP
3. **واجهة المستخدم** (`gui/`): واجهة ويب مبنية على React
4. **CLI** (`cli.py`): واجهة سطر الأوامر للفحص التلقائي

### وحدات الثغرات

- **التحكم في الوصول**: IDOR، تصعيد الامتيازات، التصفح القسري
- **الحقن**: حقن SQL، حقن الأوامر، حقن NoSQL
- **XSS**: البرمجة النصية عبر المواقع المنعكسة والمخزنة والمبنية على DOM
- **فشل التشفير**: تكوين TLS، الأصفار الضعيفة
- **سوء التكوين الأمني**: الرؤوس المفقودة، الملفات الافتراضية، الأخطاء المفصلة
- **المكونات الضعيفة**: اكتشاف البرامج القديمة
- **فشل المصادقة**: بيانات اعتماد ضعيفة، إدارة الجلسات
- **سلامة البرامج/البيانات**: القطع الأثرية غير الموقعة، سوء تكوين CI/CD
- **التسجيل والمراقبة**: سجلات الأمان والتنبيهات المفقودة
- **SSRF**: اكتشاف تزوير طلب من جانب الخادم

## اعتبارات الأمان والقانون

⚠️ **مهم**: يتضمن O-Hunter آليات أمان مدمجة:

- **سير عمل الموافقة**: تفويض صريح مطلوب قبل الفحص النشط
- **الوضع الآمن**: فحوصات سلبية افتراضية + فحوصات نشطة غير مدمرة
- **تحديد المعدل**: اختناق مدمج لتجنب DoS
- **بوابات التأكيد**: تأكيد مكتوب مطلوب للفحوصات المدمرة

### الاستخدام القانوني

- فحص الأنظمة التي تملكها أو لديك إذن صريح لاختبارها فقط
- احترام حدود المعدل وتجنب تعطيل خدمات الهدف
- اتباع ممارسات الكشف المسؤول لأي ثغرات موجودة
- الامتثال للقوانين واللوائح المحلية المتعلقة باختبار الأمان

## التطوير

### إضافة مكونات إضافية جديدة

1. إنشاء فئة ماسح ضوئي جديدة في دليل `modules/`
2. تنفيذ الطرق المطلوبة باتباع النمط الموجود
3. إضافة الماسح الضوئي إلى فئة `Scanner` الرئيسية في `core/scanner.py`
4. كتابة اختبارات للوحدة الجديدة

### هيكل المشروع

```
O-Hunter/
├── core/                   # المحرك الأساسي والخلفية
│   ├── app.py             # تطبيق Flask
│   ├── scanner.py         # منسق الماسح الضوئي الرئيسي
│   ├── report_generator.py # توليد التقارير
│   └── venv/              # بيئة Python الافتراضية
├── modules/               # وحدات الماسح الضوئي للثغرات
│   ├── access_control.py
│   ├── injection.py
│   ├── xss.py
│   └── ...
├── gui/                   # واجهة React الأمامية
│   └── ohunter-ui/
├── tests/                 # اختبارات الوحدة والتكامل
├── docs/                  # الوثائق
├── cli.py                 # واجهة سطر الأوامر
├── Dockerfile             # تكوين Docker
├── railway.toml           # تكوين Railway
├── .railwayignore         # ملفات تجاهل Railway
├── start.sh               # سكريبت التشغيل
└── requirements.txt       # تبعيات Python
```

### تشغيل الاختبارات

```bash
# تشغيل اختبارات الوحدة
PYTHONPATH=/path/to/O-Hunter python tests/test_scanner.py

# اختبار وظائف CLI
python cli.py --target https://httpbin.org --mode passive
```

## استكشاف الأخطاء وإصلاحها

### مشاكل شائعة في Railway

1. **Frontend غير متاح**:
   - تأكد من بناء Frontend بنجاح
   - تحقق من مسارات الملفات الثابتة
   - راجع سجلات البناء

2. **مشاكل البورت**:
   - Railway يعين PORT تلقائياً
   - تأكد من استخدام `0.0.0.0` كـ host

3. **مشاكل متغيرات البيئة**:
   - تحقق من `railway.toml`
   - راجع إعدادات المشروع في Railway

4. **مشاكل الذاكرة**:
   - راقب استخدام الذاكرة
   - قم بتحسين عمليات الفحص للمشاريع الكبيرة

### سجلات التشخيص

```bash
# عرض سجلات Railway
railway logs

# فحص صحة التطبيق
curl https://your-app.railway.app/api/health
```

## المساهمة

1. Fork المستودع
2. إنشاء فرع ميزة (`git checkout -b feature/amazing-feature`)
3. تأكيد التغييرات (`git commit -m 'Add amazing feature'`)
4. دفع إلى الفرع (`git push origin feature/amazing-feature`)
5. فتح Pull Request

## الترخيص

هذا المشروع مرخص تحت رخصة MIT - راجع ملف LICENSE للتفاصيل.

## الشكر والتقدير

- مؤسسة OWASP لفئات الثغرات العشرة الأولى
- مجتمع أبحاث الأمان لتقنيات اكتشاف الثغرات
- أدوات الأمان مفتوحة المصدر التي ألهمت هذا المشروع
- منصة Railway للاستضافة السحابية المبسطة

## الدعم

للأسئلة أو المشاكل أو المساهمات، يرجى:
- فتح issue على GitHub
- التواصل: Eng. Omar Hany

## معلومات النشر على Railway

- **الرابط العام**: سيتم توفيره بعد النشر
- **فحص الصحة**: `/api/health`
- **API الرئيسي**: `/api/scan`
- **الواجهة**: `/`

---

**إخلاء مسؤولية**: هذه الأداة مخصصة لأغراض تعليمية واختبار الأمان المصرح به فقط. المستخدمون مسؤولون عن ضمان حصولهم على التفويض المناسب قبل فحص أي أنظمة.

**تم تحسينه لـ Railway بواسطة Manus AI**

